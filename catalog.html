<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Каталог одежды | MR BEKZHAN</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    h1 {
      text-align: center;
      font-size: 56px;
      margin-top: 40px;
      margin-bottom: 10px;
      letter-spacing: 2px;
      font-family: 'Arial Black', Arial, sans-serif;
    }
    .catalog-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 40px;
      padding: 40px 60px 60px 60px;
      max-width: 1200px;
      margin: 0 auto;
      align-items: stretch;
    }
    .catalog-card {
      background: #181818;
      border: 1px solid #444;
      border-radius: 14px;
      padding: 20px;
      text-align: center;
      transition: box-shadow 0.3s, transform 0.3s;
      display: flex;
      flex-direction: column;
      height: 320px;
      box-sizing: border-box;
      justify-content: flex-start;
      cursor: pointer;
    }
    .catalog-card:hover {
      box-shadow: 0 8px 32px rgba(0,0,0,0.5);
      transform: translateY(-10px) scale(1.04);
      z-index: 2;
    }
    .catalog-title {
      font-size: 18px;
      margin-bottom: 6px;
      font-weight: bold;
      min-height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Arial Black', Arial, sans-serif;
      color: #fff;
      letter-spacing: 1px;
      text-align: center;
      width: 100%;
      word-break: break-word;
      line-height: 1.15;
      white-space: normal;
    }
    .catalog-price {
      font-size: 16px;
      color: #ddd;
      margin-bottom: 10px;
      margin-top: auto;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      width: 100%;
    }
    .catalog-card img {
      width: 100%;
      max-width: 180px;
      height: 140px;
      object-fit: contain;
      border-radius: 10px;
      margin-bottom: 14px;
      flex-shrink: 0;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    .back-button {
      display: block;
      width: 180px;
      margin: 40px auto 30px auto;
      padding: 16px 0;
      background: transparent;
      border: 2px solid #fff;
      border-radius: 40px;
      color: #fff;
      text-align: center;
      font-size: 20px;
      text-decoration: none;
      transition: all 0.3s;
      letter-spacing: 2px;
    }
    .back-button:hover {
      background: #fff;
      color: #111;
    }
    .cart-fixed {
      position: fixed;
      right: 32px;
      bottom: 32px;
      background: #181818;
      color: #fff;
      border-radius: 22px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.7);
      min-width: 340px;
      max-width: 96vw;
      z-index: 1001;
      padding: 28px 28px 18px 28px;
      display: none;
      flex-direction: column;
      font-size: 18px;
      border: 2px solid #ffd700;
      transition: box-shadow 0.2s, transform 0.2s;
    }
    .cart-fixed.active {
      display: flex;
      animation: cartShow 0.3s;
    }
    @keyframes cartShow {
      from { transform: translateY(60px) scale(0.95); opacity: 0; }
      to { transform: none; opacity: 1; }
    }
    .cart-fixed-title {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 12px;
      color: #ffd700;
      letter-spacing: 1px;
    }
    .cart-fixed-list {
      list-style: none;
      margin: 0 0 10px 0;
      padding: 0;
      max-height: 220px;
      overflow-y: auto;
    }
    .cart-fixed-list li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      border-bottom: 1px solid #333;
      padding-bottom: 4px;
      font-size: 17px;
    }
    .cart-fixed-remove {
      color: #e74c3c;
      cursor: pointer;
      font-size: 18px;
      margin-left: 10px;
      background: none;
      border: none;
    }
    .cart-fixed-empty {
      color: #aaa;
      text-align: center;
      margin: 18px 0 8px 0;
      font-size: 16px;
    }
    .cart-fixed-total {
      text-align: right;
      font-weight: bold;
      margin-top: 8px;
      font-size: 19px;
      color: #fff;
    }
    .cart-fixed-btn {
      margin-top: 14px;
      padding: 13px 0;
      background: #ffd700;
      color: #111;
      border: none;
      border-radius: 18px;
      font-size: 19px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, transform 0.2s;
      letter-spacing: 1px;
      width: 100%;
    }
    .cart-fixed-btn:hover {
      background: #fff200;
      color: #111;
      transform: scale(1.03);
    }
    .add-to-cart-btn {
      margin-top: 12px;
      padding: 13px 0;
      background: #fff;
      color: #181818;
      border: none;
      border-radius: 32px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 12px #fff2, 0 1px 6px #0004;
      letter-spacing: 1px;
      width: 100%;
      outline: none;
    }
    .add-to-cart-btn:hover {
      background: #232323;
      color: #fff;
      transform: scale(1.04);
      box-shadow: 0 4px 24px #fff4, 0 2px 12px #0006;
    }
  </style>
</head>
<body>
  <div class="nav fade-in" style="position:relative;">
    <a href="MrWest.html">Главная</a>
    <a href="catalog.html" class="active">Каталог</a>
  </div>
  <h1 class="fade-in">Каталог одежды</h1>
  <div class="catalog-grid fade-in" id="catalogGrid">
    <!-- Товары остаются без изменений -->
  </div>
  <a href="MrWest.html" class="back-button fade-in">← На главную</a>
  <div class="copyright fade-in">
    © 2008-2025 Все права защищены
  </div>

  <!-- Фиксированная корзина -->
  <div class="cart-fixed fade-in" id="cartFixed">
    <div class="cart-fixed-title">Корзина</div>
    <ul class="cart-fixed-list" id="cartFixedList"></ul>
    <div class="cart-fixed-empty" id="cartFixedEmpty">Корзина пуста</div>
    <div class="cart-fixed-total" id="cartFixedTotal"></div>
    <button class="cart-fixed-btn" id="cartFixedBuy" style="display:none;">Оформить заказ</button>
  </div>

  <script>
    // Корзина в localStorage
    function getCart() {
      return JSON.parse(localStorage.getItem('cart') || '[]');
    }
    function setCart(cart) {
      localStorage.setItem('cart', JSON.stringify(cart));
    }
    function updateCartFixed() {
      const cart = getCart();
      const cartFixed = document.getElementById('cartFixed');
      const cartFixedList = document.getElementById('cartFixedList');
      const cartFixedEmpty = document.getElementById('cartFixedEmpty');
      const cartFixedTotal = document.getElementById('cartFixedTotal');
      const cartFixedBuy = document.getElementById('cartFixedBuy');
      cartFixedList.innerHTML = '';
      let total = 0;
      if (cart.length === 0) {
        cartFixed.classList.remove('active');
        cartFixedEmpty.style.display = 'block';
        cartFixedTotal.textContent = '';
        cartFixedBuy.style.display = 'none';
      } else {
        cartFixed.classList.add('active');
        cartFixedEmpty.style.display = 'none';
        cart.forEach((item, idx) => {
          total += item.qty * item.price;
          const li = document.createElement('li');
          li.innerHTML = `
            <span>${item.title} <small style="color:#aaa;">x${item.qty}</small></span>
            <span>
              $${(item.price * item.qty).toFixed(2)}
              <button class="cart-fixed-remove" data-idx="${idx}" title="Удалить">&#10006;</button>
            </span>
          `;
          cartFixedList.appendChild(li);
        });
        cartFixedTotal.textContent = 'Итого: $' + total.toFixed(2);
        cartFixedBuy.style.display = 'block';
      }
    }
    function addToCart(title, price, img) {
      let cart = getCart();
      const idx = cart.findIndex(item => item.title === title);
      if (idx >= 0) {
        cart[idx].qty += 1;
      } else {
        cart.push({ title, price: parseFloat(price), img, qty: 1 });
      }
      setCart(cart);
      updateCartFixed();
    }
    document.addEventListener('DOMContentLoaded', function() {
      updateCartFixed();
      // Клик по "В корзину"
      document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
          const card = btn.closest('.catalog-card');
          addToCart(card.dataset.title, card.dataset.price, card.dataset.img);
        });
      });
      // Удалить товар из корзины
      document.getElementById('cartFixedList').onclick = function(e) {
        if (e.target.classList.contains('cart-fixed-remove')) {
          let cart = getCart();
          cart.splice(Number(e.target.dataset.idx), 1);
          setCart(cart);
          updateCartFixed();
        }
      };
      // Кнопка "Оформить заказ"
      document.getElementById('cartFixedBuy').onclick = function() {
        window.location.href = 'buy.html';
      };
      // Анимация появления
      setTimeout(() => {
        document.querySelectorAll('.fade-in').forEach((el, i) => {
          setTimeout(() => el.classList.add('show'), i * 120);
        });
      }, 120);
    });
  </script>
</body>
</html>
